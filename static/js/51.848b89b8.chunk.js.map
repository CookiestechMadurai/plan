{"version":3,"file":"static/js/51.848b89b8.chunk.js","mappings":"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","sources":["components/CompanyDetail.js"],"sourcesContent":["// src/components/CompanyDetail.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  addDoc,\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  serverTimestamp,\r\n} from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport Navbar from './Navbar';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst CompanyDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { currentUser } = useAuth();\r\n  const [company, setCompany] = useState(null);\r\n  const [modalImage, setModalImage] = useState(null);\r\n  const [showChat, setShowChat] = useState(false);\r\n  const [messageText, setMessageText] = useState('');\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [loadingMessages, setLoadingMessages] = useState(false);\r\n  const [showOrderModal, setShowOrderModal] = useState(false);\r\n  const [orderName, setOrderName] = useState('');\r\n  const [orderMobile, setOrderMobile] = useState('');\r\n  const [orderDate, setOrderDate] = useState('');\r\n  const [orderLocation, setOrderLocation] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchCompany = async () => {\r\n      const docRef = doc(db, 'postorder', id);\r\n      const docSnap = await getDoc(docRef);\r\n      if (docSnap.exists()) setCompany({ id: docSnap.id, ...docSnap.data() });\r\n    };\r\n    fetchCompany();\r\n  }, [id]);\r\n\r\n  const fetchMessages = async () => {\r\n    if (!currentUser || !company?.vendorid) return;\r\n    setLoadingMessages(true);\r\n    const q = query(\r\n      collection(db, 'webchat'),\r\n      where('senderId', 'in', [currentUser.uid, company.vendorid]),\r\n      where('receiverId', 'in', [currentUser.uid, company.vendorid])\r\n    );\r\n    const snap = await getDocs(q);\r\n    const msgs = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    msgs.sort((a, b) => a.time?.seconds - b.time?.seconds);\r\n    setChatMessages(msgs);\r\n    setLoadingMessages(false);\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!messageText.trim() || !currentUser || !company?.vendorid) return;\r\n    const messageData = {\r\n      senderId: currentUser.uid,\r\n      senderName: currentUser.displayName || 'Anonymous',\r\n      receiverId: company.vendorid,\r\n      receiverName: company.businessname,\r\n      message: messageText.trim(),\r\n      time: serverTimestamp(),\r\n      isRead: false,\r\n    };\r\n    await addDoc(collection(db, 'webchat'), messageData);\r\n    setMessageText('');\r\n    fetchMessages();\r\n  };\r\n\r\n  const handlePlaceOrder = () => {\r\n    if (!currentUser) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    setShowOrderModal(true);\r\n  };\r\n\r\n  const handleOrderSubmit = async () => {\r\n    if (!orderName || !orderMobile || !orderDate || !orderLocation || !currentUser) {\r\n      alert(\"Please fill all fields.\");\r\n      return;\r\n    }\r\n\r\n    const orderData = {\r\n      name: orderName,\r\n      mobilenumber: orderMobile,\r\n      placelocation: orderLocation,\r\n      dateofevent: orderDate,\r\n      status: 'pending',\r\n      userid: currentUser.uid,\r\n      vendorid: company.vendorid,\r\n      businessname: company.businessname,\r\n      eventname: company.eventname,\r\n      image: company.image,\r\n      location: company.location,\r\n      docid: company.id,\r\n    };\r\n\r\n    await addDoc(collection(db, 'placeorder'), orderData);\r\n    alert(\"Order placed successfully!\");\r\n    setShowOrderModal(false);\r\n    setOrderName('');\r\n    setOrderMobile('');\r\n    setOrderDate('');\r\n    setOrderLocation('');\r\n  };\r\n\r\n  if (!company) return <p style={styles.loading}>Loading...</p>;\r\n\r\n  const menuImages = [...new Set(company.menu || [])];\r\n\r\n  return (\r\n    <div style={{ background: '#f1f5f9', minHeight: '100vh', paddingBottom: '40px' }}>\r\n      <Navbar />\r\n\r\n      <div style={styles.card}>\r\n        <div style={styles.header}>\r\n          <img\r\n            src={company.image || '/images/default.jpg'}\r\n            alt={company.businessname}\r\n            style={styles.mainImage}\r\n            onError={e => (e.target.style.display = 'none')}\r\n          />\r\n          <div>\r\n            <h1 style={styles.companyName}>{company.businessname}</h1>\r\n            <p style={styles.category}><strong>Category:</strong> {company.eventname}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={styles.infoGrid}>\r\n          <InfoBox icon=\"fa-user\" label=\"Owner\" value={company.name} />\r\n          <InfoBox icon=\"fa-map-marker-alt\" label=\"Location\" value={company.location} />\r\n          <InfoBox icon=\"fa-calendar-alt\" label=\"Posting Date\" value=\"27-APR-25\" />\r\n          <InfoBox icon=\"fa-phone\" label=\"Mobile\" value={company.mobilenumber} />\r\n          <InfoBox icon=\"fa-clock\" label=\"Working Hours\" value={company.hours} />\r\n          <InfoBox icon=\"fa-briefcase\" label=\"Experience\" value={`${company.exprience} years`} />\r\n          {company.minprice && (\r\n            <InfoBox\r\n              icon=\"fa-tag\"\r\n              label=\"Price\"\r\n              value={\r\n                <div style={styles.priceValue}>\r\n                  <span style={styles.discountText}>M.R.P.</span>\r\n                  <span style={styles.originalPrice}>₹{Math.round(company.minprice * 1.1).toLocaleString()}</span>\r\n                  <span style={styles.discountedPrice}>₹{company.minprice.toLocaleString()}</span>\r\n                </div>\r\n              }\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <div style={styles.infoBox}>\r\n          <div style={styles.infoHeader}>\r\n            <i className=\"fas fa-align-left\" style={styles.icon}></i>\r\n            <span style={styles.infoLabel}>Description</span>\r\n          </div>\r\n          <div style={styles.infoContent}>\r\n            <p>{company.description}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {menuImages.length > 0 && (\r\n          <div style={styles.menuContainer}>\r\n            <h2 style={styles.subheading}>Menu Gallery</h2>\r\n            <div style={styles.menuGrid}>\r\n              {menuImages.map((url, idx) => (\r\n                <div key={idx} style={styles.menuImageWrapper}>\r\n                  <img\r\n                    src={url}\r\n                    alt={`Menu ${idx + 1}`}\r\n                    style={styles.menuImage}\r\n                    onClick={() => setModalImage(url)}\r\n                    onError={e => (e.target.style.display = 'none')}\r\n                  />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div style={styles.chatButtonWrapper}>\r\n          <button\r\n            style={styles.chatButton}\r\n            onClick={() => {\r\n              if (!currentUser) {\r\n                navigate('/login');\r\n                return;\r\n              }\r\n              setShowChat(true);\r\n              fetchMessages();\r\n            }}\r\n          >\r\n            Chat with Vendor\r\n          </button>\r\n          <button\r\n            style={{ ...styles.chatButton, backgroundColor: '#10b981', marginLeft: '10px' }}\r\n            onClick={handlePlaceOrder}\r\n          >\r\n            Place an Order\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {showChat && (\r\n        <div style={styles.chatModal}>\r\n          <div style={styles.chatHeader}>\r\n            <span>Chat with {company.businessname}</span>\r\n            <button style={styles.closeBtn} onClick={() => setShowChat(false)}>×</button>\r\n          </div>\r\n          <div style={styles.chatBody}>\r\n            {loadingMessages\r\n              ? <p>Loading messages…</p>\r\n              : chatMessages.map(msg => (\r\n                <div\r\n                  key={msg.id}\r\n                  style={{\r\n                    ...styles.messageBubble,\r\n                    alignSelf: msg.senderId === currentUser.uid ? 'flex-end' : 'flex-start',\r\n                    backgroundColor: msg.senderId === currentUser.uid ? '#005f7f' : '#e4e6eb',\r\n                    color: msg.senderId === currentUser.uid ? '#fff' : '#000',\r\n                  }}\r\n                >\r\n                  {msg.message}\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n          <div style={styles.chatInputArea}>\r\n            <input\r\n              style={styles.chatInput}\r\n              value={messageText}\r\n              onChange={e => setMessageText(e.target.value)}\r\n              placeholder=\"Type a message…\"\r\n            />\r\n            <button style={styles.sendBtn} onClick={handleSendMessage}>Send</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {modalImage && (\r\n        <div style={styles.modalOverlay} onClick={() => setModalImage(null)}>\r\n          <img src={modalImage} alt=\"Menu\" style={styles.modalImage} />\r\n        </div>\r\n      )}\r\n\r\n      {showOrderModal && (\r\n        <div style={styles.modalOverlay}>\r\n          <div style={styles.orderModal}>\r\n            <h2 style={{ marginBottom: '16px', color: '#005f7f' }}>Place Your Order</h2>\r\n            <input style={styles.modalInput} placeholder=\"Your Name\" value={orderName} onChange={e => setOrderName(e.target.value)} />\r\n            <input style={styles.modalInput} placeholder=\"Mobile Number\" value={orderMobile} onChange={e => setOrderMobile(e.target.value)} />\r\n            <input style={styles.modalInput} type=\"date\" value={orderDate} onChange={e => setOrderDate(e.target.value)} />\r\n            <input style={styles.modalInput} placeholder=\"Event Location\" value={orderLocation} onChange={e => setOrderLocation(e.target.value)} />\r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '16px' }}>\r\n              <button style={styles.sendBtn} onClick={handleOrderSubmit}>Submit</button>\r\n              <button style={styles.chatButton} onClick={() => setShowOrderModal(false)}>Cancel</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst InfoBox = ({ icon, label, value }) => (\r\n  <div style={styles.infoBox}>\r\n    <div style={styles.infoHeader}>\r\n      <i className={`fas ${icon}`} style={styles.icon}></i>\r\n      <span style={styles.infoLabel}>{label}</span>\r\n    </div>\r\n    <div style={styles.infoContent}>{value || 'N/A'}</div>\r\n  </div>\r\n);\r\n\r\nconst styles = {\r\n  card: {\r\n    backgroundColor: '#fff',\r\n    maxWidth: '1000px',\r\n    margin: '30px auto',\r\n    borderRadius: '12px',\r\n    padding: '30px',\r\n    boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    gap: '30px',\r\n    alignItems: 'center',\r\n    marginBottom: '30px',\r\n  },\r\n  companyName: {\r\n    fontSize: '30px',\r\n    fontWeight: '700',\r\n    color: '#005f7f',\r\n  },\r\n  category: {\r\n    fontSize: '18px',\r\n    color: '#555',\r\n  },\r\n  priceContainer: {\r\n    marginTop: '8px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px',\r\n  },\r\n  priceCard: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: '10px',\r\n    padding: '16px',\r\n    marginTop: '12px',\r\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n    maxWidth: '320px',\r\n  },\r\n  priceCardTitle: {\r\n    margin: '0 0 12px 0',\r\n    fontSize: '20px',\r\n    fontWeight: '700',\r\n    color: '#005f7f',\r\n  },\r\n  discountText: {\r\n    color: '#e60000',\r\n    fontWeight: '700',\r\n    fontSize: '20px',\r\n  },\r\n  priceValue: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '8px',\r\n  },\r\n  discountedPrice: {\r\n    fontWeight: '700',\r\n    fontSize: '18px',\r\n    color: '#000',\r\n  },\r\n  originalPrice: {\r\n    fontSize: '14px',\r\n    color: '#555',\r\n    textDecoration: 'line-through',\r\n  },\r\n  mainImage: {\r\n    width: '200px',\r\n    height: '200px',\r\n    objectFit: 'cover',\r\n    borderRadius: '12px',\r\n  },\r\n  infoGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(auto-fit, minmax(260px, 1fr))',\r\n    gap: '20px',\r\n    marginBottom: '30px',\r\n  },\r\n  infoBox: {\r\n    background: '#f9fafb',\r\n    borderRadius: '10px',\r\n    padding: '16px',\r\n    border: '1px solid #e5e7eb',\r\n  },\r\n  infoHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginBottom: '10px',\r\n    fontWeight: '600',\r\n    fontSize: '16px',\r\n  },\r\n  icon: {\r\n    marginRight: '10px',\r\n    color: '#005f7f',\r\n  },\r\n  infoLabel: {\r\n    fontSize: '16px',\r\n  },\r\n  infoContent: {\r\n    fontSize: '15px',\r\n    color: '#374151',\r\n  },\r\n  menuContainer: {\r\n    marginTop: '20px',\r\n  },\r\n  subheading: {\r\n    fontSize: '22px',\r\n    fontWeight: '600',\r\n    marginBottom: '16px',\r\n    color: '#005f7f',\r\n    textAlign: 'center',\r\n  },\r\n  menuGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(auto-fill, minmax(180px, 1fr))',\r\n    gap: '16px',\r\n  },\r\n  menuImageWrapper: { overflow: 'hidden', borderRadius: '8px' },\r\n  menuImage: {\r\n    width: '100%',\r\n    height: 'auto',\r\n    borderRadius: '8px',\r\n    cursor: 'pointer',\r\n  },\r\n  chatButtonWrapper: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: '30px',\r\n  },\r\n  chatButton: {\r\n    padding: '12px 24px',\r\n    backgroundColor: '#005f7f',\r\n    color: '#fff',\r\n    border: 'none',\r\n    borderRadius: '6px',\r\n    cursor: 'pointer',\r\n    fontSize: '16px',\r\n    fontWeight: '600',\r\n  },\r\n  chatModal: {\r\n    position: 'fixed',\r\n    bottom: '20px',\r\n    right: '20px',\r\n    width: '320px',\r\n    backgroundColor: '#fff',\r\n    borderRadius: '12px',\r\n    boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    zIndex: 2000,\r\n  },\r\n  chatHeader: {\r\n    padding: '12px 16px',\r\n    backgroundColor: '#005f7f',\r\n    color: '#fff',\r\n    borderTopLeftRadius: '12px',\r\n    borderTopRightRadius: '12px',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    fontWeight: '600',\r\n  },\r\n  closeBtn: {\r\n    background: 'none',\r\n    border: 'none',\r\n    color: '#fff',\r\n    fontSize: '20px',\r\n    cursor: 'pointer',\r\n  },\r\n  chatBody: {\r\n    padding: '10px',\r\n    maxHeight: '300px',\r\n    overflowY: 'auto',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '8px',\r\n  },\r\n  messageBubble: {\r\n    maxWidth: '75%',\r\n    padding: '10px 14px',\r\n    borderRadius: '16px',\r\n    fontSize: '14px',\r\n  },\r\n  chatInputArea: {\r\n    display: 'flex',\r\n    borderTop: '1px solid #ccc',\r\n  },\r\n  chatInput: {\r\n    flex: 1,\r\n    padding: '10px',\r\n    border: 'none',\r\n    fontSize: '14px',\r\n    outline: 'none',\r\n  },\r\n  sendBtn: {\r\n    padding: '10px 16px',\r\n    backgroundColor: '#005f7f',\r\n    color: '#fff',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    fontSize: '14px',\r\n  },\r\n  modalOverlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100vw',\r\n    height: '100vh',\r\n    backgroundColor: 'rgba(0,0,0,0.8)',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    zIndex: 1000,\r\n  },\r\n  modalImage: {\r\n    maxWidth: '90%',\r\n    maxHeight: '90%',\r\n    borderRadius: '8px',\r\n  },\r\n  orderModal: {\r\n    backgroundColor: '#fff',\r\n    padding: '24px',\r\n    borderRadius: '12px',\r\n    width: '90%',\r\n    maxWidth: '400px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'stretch',\r\n  },\r\n  modalInput: {\r\n    marginBottom: '12px',\r\n    padding: '10px',\r\n    fontSize: '15px',\r\n    borderRadius: '6px',\r\n    border: '1px solid #ccc',\r\n    outline: 'none',\r\n  },\r\n  loading: {\r\n    color: '#005f7f',\r\n    textAlign: 'center',\r\n    padding: '40px',\r\n    fontSize: '18px',\r\n  },\r\n};\r\n\r\nexport default CompanyDetail;\r\n"],"names":["InfoBox","_ref","icon","label","value","_jsxs","style","styles","infoBox","children","infoHeader","_jsx","className","infoLabel","infoContent","card","backgroundColor","maxWidth","margin","borderRadius","padding","boxShadow","header","display","flexDirection","gap","alignItems","marginBottom","companyName","fontSize","fontWeight","color","category","priceContainer","marginTop","priceCard","priceCardTitle","discountText","priceValue","discountedPrice","originalPrice","textDecoration","mainImage","width","height","objectFit","infoGrid","gridTemplateColumns","background","border","marginRight","menuContainer","subheading","textAlign","menuGrid","menuImageWrapper","overflow","menuImage","cursor","chatButtonWrapper","justifyContent","chatButton","chatModal","position","bottom","right","zIndex","chatHeader","borderTopLeftRadius","borderTopRightRadius","closeBtn","chatBody","maxHeight","overflowY","messageBubble","chatInputArea","borderTop","chatInput","flex","outline","sendBtn","modalOverlay","top","left","modalImage","orderModal","modalInput","loading","CompanyDetail","id","useParams","navigate","useNavigate","currentUser","useAuth","company","setCompany","useState","setModalImage","showChat","setShowChat","messageText","setMessageText","chatMessages","setChatMessages","loadingMessages","setLoadingMessages","showOrderModal","setShowOrderModal","orderName","setOrderName","orderMobile","setOrderMobile","orderDate","setOrderDate","orderLocation","setOrderLocation","useEffect","async","docRef","doc","db","docSnap","getDoc","exists","data","fetchCompany","fetchMessages","vendorid","q","query","collection","where","uid","msgs","getDocs","docs","map","d","sort","a","b","_a$time","_b$time","time","seconds","menuImages","Set","menu","minHeight","paddingBottom","Navbar","src","image","alt","businessname","onError","e","target","eventname","name","location","mobilenumber","hours","exprience","minprice","Math","round","toLocaleString","description","length","url","idx","onClick","marginLeft","handlePlaceOrder","msg","alignSelf","senderId","message","onChange","placeholder","trim","messageData","senderName","displayName","receiverId","receiverName","serverTimestamp","isRead","addDoc","type","alert","orderData","placelocation","dateofevent","status","userid","docid"],"sourceRoot":""}